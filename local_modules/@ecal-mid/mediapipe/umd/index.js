/*!
 * 
 *   @ecal-mid/mediapipe v1.1.2
 *   git+https://github.com/Matoseb/musee-de-la-main-2022-scripts.git
 *
 *   Copyright (c) SÃ©bastien Matos (https://github.com/matoseb) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Test=e():t.Test=e()}(self,(function(){return(()=>{var t={757:(t,e,r)=>{t.exports=r(666)},264:function(t,e,r){(function(){"use strict";var t;function e(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,r){return t==Array.prototype||t==Object.prototype||(t[e]=r.value),t};var i=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof r.g&&r.g];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function o(t,e){if(e)t:{var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];if(!(a in r))break t;r=r[a]}(e=e(o=r[t=t[t.length-1]]))!=o&&null!=e&&n(r,t,{configurable:!0,writable:!0,value:e})}}function a(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function s(t){var r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:e(t)}}function u(t){if(!(t instanceof Array)){t=s(t);for(var e,r=[];!(e=t.next()).done;)r.push(e.value);t=r}return t}o("Symbol",(function(t){function e(t,e){this.g=t,n(this,"description",{configurable:!0,writable:!0,value:e})}if(t)return t;e.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function t(n){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new e(r+(n||"")+"_"+i++,n)}})),o("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<r.length;o++){var s=i[r[o]];"function"==typeof s&&"function"!=typeof s.prototype[t]&&n(s.prototype,t,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return t}));var c,l="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var f;t:{var h={};try{h.__proto__={a:!0},f=h.a;break t}catch(t){}f=!1}c=f?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var p=c;function d(t,e){if(t.prototype=l(e.prototype),t.prototype.constructor=t,p)p(t,e);else for(var r in e)if("prototype"!=r)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,r);n&&Object.defineProperty(t,r,n)}else t[r]=e[r];t.ea=e.prototype}function v(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function g(t){if(t.l)throw new TypeError("Generator is already running");t.l=!0}function y(t,e){t.j={U:e,V:!0},t.g=t.m||t.s}function m(t,e,r){return t.g=r,{value:e}}function b(t){this.g=new v,this.h=t}function w(t,e,r,n){try{var i=e.call(t.g.i,r);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.g.l=!1,i;var o=i.value}catch(e){return t.g.i=null,y(t.g,e),E(t)}return t.g.i=null,n.call(t.g,o),E(t)}function E(t){for(;t.g.g;)try{var e=t.h(t.g);if(e)return t.g.l=!1,{value:e.value,done:!1}}catch(e){t.g.h=void 0,y(t.g,e)}if(t.g.l=!1,t.g.j){if(e=t.g.j,t.g.j=null,e.V)throw e.U;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function O(t){this.next=function(e){return g(t.g),t.g.i?e=w(t,t.g.i.next,e,t.g.o):(t.g.o(e),e=E(t)),e},this.throw=function(e){return g(t.g),t.g.i?e=w(t,t.g.i.throw,e,t.g.o):(y(t.g,e),e=E(t)),e},this.return=function(e){return function(t,e){g(t.g);var r=t.g.i;return r?w(t,"return"in r?r.return:function(t){return{value:t,done:!0}},e,t.g.return):(t.g.return(e),E(t))}(t,e)},this[Symbol.iterator]=function(){return this}}function _(t){return function(t){function e(e){return t.next(e)}function r(e){return t.throw(e)}return new Promise((function(n,i){!function t(o){o.done?n(o.value):Promise.resolve(o.value).then(e,r).then(t,i)}(t.next())}))}(new O(new b(t)))}v.prototype.o=function(t){this.h=t},v.prototype.return=function(t){this.j={return:t},this.g=this.s},o("Promise",(function(t){function e(t){this.h=0,this.i=void 0,this.g=[],this.o=!1;var e=this.j();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.g=null}function n(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.h=function(t){if(null==this.g){this.g=[];var e=this;this.i((function(){e.l()}))}this.g.push(t)};var o=i.setTimeout;r.prototype.i=function(t){o(t,0)},r.prototype.l=function(){for(;this.g&&this.g.length;){var t=this.g;this.g=[];for(var e=0;e<t.length;++e){var r=t[e];t[e]=null;try{r()}catch(t){this.j(t)}}}this.g=null},r.prototype.j=function(t){this.i((function(){throw t}))},e.prototype.j=function(){function t(t){return function(n){r||(r=!0,t.call(e,n))}}var e=this,r=!1;return{resolve:t(this.C),reject:t(this.l)}},e.prototype.C=function(t){if(t===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.F(t);else{t:switch(typeof t){case"object":var r=null!=t;break t;case"function":r=!0;break t;default:r=!1}r?this.v(t):this.m(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.l(t)}"function"==typeof e?this.G(e,t):this.m(t)},e.prototype.l=function(t){this.s(2,t)},e.prototype.m=function(t){this.s(1,t)},e.prototype.s=function(t,e){if(0!=this.h)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.h);this.h=t,this.i=e,2===this.h&&this.D(),this.A()},e.prototype.D=function(){var t=this;o((function(){if(t.B()){var e=i.console;void 0!==e&&e.error(t.i)}}),1)},e.prototype.B=function(){if(this.o)return!1;var t=i.CustomEvent,e=i.Event,r=i.dispatchEvent;return void 0===r||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.i,r(t))},e.prototype.A=function(){if(null!=this.g){for(var t=0;t<this.g.length;++t)a.h(this.g[t]);this.g=null}};var a=new r;return e.prototype.F=function(t){var e=this.j();t.J(e.resolve,e.reject)},e.prototype.G=function(t,e){var r=this.j();try{t.call(e,r.resolve,r.reject)}catch(t){r.reject(t)}},e.prototype.then=function(t,r){function n(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.J(n(t,i),n(r,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.J=function(t,e){function r(){switch(n.h){case 1:t(n.i);break;case 2:e(n.i);break;default:throw Error("Unexpected state: "+n.h)}}var n=this;null==this.g?a.h(r):this.g.push(r),this.o=!0},e.resolve=n,e.reject=function(t){return new e((function(e,r){r(t)}))},e.race=function(t){return new e((function(e,r){for(var i=s(t),o=i.next();!o.done;o=i.next())n(o.value).J(e,r)}))},e.all=function(t){var r=s(t),i=r.next();return i.done?n([]):new e((function(t,e){function o(e){return function(r){a[e]=r,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,n(i.value).J(o(a.length-1),e),i=r.next()}while(!i.done)}))},e}));var T="function"==typeof Object.assign?Object.assign:function(t,e){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};o("Object.assign",(function(t){return t||T})),o("Object.is",(function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}})),o("Array.prototype.includes",(function(t){return t||function(t,e){var r=this;r instanceof String&&(r=String(r));var n=r.length;for(0>(e=e||0)&&(e=Math.max(e+n,0));e<n;e++){var i=r[e];if(i===t||Object.is(i,t))return!0}return!1}})),o("String.prototype.includes",(function(t){return t||function(t,e){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(t,e||0)}})),o("Array.prototype.keys",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var r=0,n=!1,i={next:function(){if(!n&&r<t.length){var i=r++;return{value:e(i,t[i]),done:!1}}return n=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(t){return t}))}}));var k=this||self;function R(t,e){t=t.split(".");var r,n=k;t[0]in n||void 0===n.execScript||n.execScript("var "+t[0]);for(;t.length&&(r=t.shift());)t.length||void 0===e?n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}:n[r]=e}function L(t){!function(t){k.setTimeout((function(){throw t}),0)}(t)}function A(t,e){L(Error("Invalid wire type: "+t+" (at position "+e+")"))}function j(){L(Error("Failed to read varint, encoding is invalid."))}function x(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}var P,S,F="undefined"!=typeof TextDecoder,I="undefined"!=typeof TextEncoder;function N(t){if(I)t=(S||(S=new TextEncoder)).encode(t);else{var e=void 0;e=void 0!==e&&e;for(var r=0,n=new Uint8Array(3*t.length),i=0;i<t.length;i++){var o=t.charCodeAt(i);if(128>o)n[r++]=o;else{if(2048>o)n[r++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&i<t.length){var a=t.charCodeAt(++i);if(56320<=a&&57343>=a){o=1024*(o-55296)+a-56320+65536,n[r++]=o>>18|240,n[r++]=o>>12&63|128,n[r++]=o>>6&63|128,n[r++]=63&o|128;continue}i--}if(e)throw Error("Found an unpaired surrogate");o=65533}n[r++]=o>>12|224,n[r++]=o>>6&63|128}n[r++]=63&o|128}}t=n.subarray(0,r)}return t}var D={},M=null;function H(t){var e;void 0===e&&(e=0),U(),e=D[e];for(var r=Array(Math.floor(t.length/3)),n=e[64]||"",i=0,o=0;i<t.length-2;i+=3){var a=t[i],s=t[i+1],u=t[i+2],c=e[a>>2];a=e[(3&a)<<4|s>>4],s=e[(15&s)<<2|u>>6],u=e[63&u],r[o++]=c+a+s+u}switch(c=0,u=n,t.length-i){case 2:u=e[(15&(c=t[i+1]))<<2]||n;case 1:t=t[i],r[o]=e[t>>2]+e[(3&t)<<4|c>>4]+u+n}return r.join("")}function C(t){var e=t.length,r=3*e/4;r%3?r=Math.floor(r):-1!="=.".indexOf(t[e-1])&&(r=-1!="=.".indexOf(t[e-2])?r-2:r-1);var n=new Uint8Array(r),i=0;return function(t,e){function r(e){for(;n<t.length;){var r=t.charAt(n++),i=M[r];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(r))throw Error("Unknown base64 encoding at char: "+r)}return e}U();for(var n=0;;){var i=r(-1),o=r(0),a=r(64),s=r(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){n[i++]=t})),n.subarray(0,i)}function U(){if(!M){M={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var n=t.concat(e[r].split(""));D[r]=n;for(var i=0;i<n.length;i++){var o=n[i];void 0===M[o]&&(M[o]=i)}}}}var G,B="function"==typeof Uint8Array;function K(t){if(this.g=t,null!==t&&0===t.length)throw Error("ByteString should be constructed with non-empty values")}K.prototype.toJSON=function(){if(null==this.g)var t="";else t=this.g,t=this.g=null==t||"string"==typeof t?t:B&&t instanceof Uint8Array?H(t):null;return t};var Y="function"==typeof Uint8Array.prototype.slice;function W(t,e,r){return e===r?G||(G=new Uint8Array(0)):Y?t.slice(e,r):new Uint8Array(t.subarray(e,r))}var X=0;function V(t,e){e=void 0!==(e=void 0===e?{}:e).u&&e.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=e,t&&z(this,t)}function z(t,e){t.h=function(t){if(t.constructor===Uint8Array)return t;if(t.constructor===ArrayBuffer)return new Uint8Array(t);if(t.constructor===Array)return new Uint8Array(t);if(t.constructor===String)return C(t);if(t.constructor===K){if(null==t.g)var e=G||(G=new Uint8Array(0));else{e=Uint8Array;var r=t.g;r=null==r||B&&null!=r&&r instanceof Uint8Array?r:"string"==typeof r?C(r):null,e=new e(t=t.g=r)}return e}if(t instanceof Uint8Array)return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(e),t.l=0,t.i=t.h.length,t.g=t.l}function J(t){t.g>t.i&&(t.j=!0,L(Error("Tried to read past the end of the data "+t.g+" > "+t.i)))}function q(t){var e=t.h,r=e[t.g],n=127&r;return 128>r?(t.g+=1,J(t),n):(n|=(127&(r=e[t.g+1]))<<7,128>r?(t.g+=2,J(t),n):(n|=(127&(r=e[t.g+2]))<<14,128>r?(t.g+=3,J(t),n):(n|=(127&(r=e[t.g+3]))<<21,128>r?(t.g+=4,J(t),n):(n|=(15&(r=e[t.g+4]))<<28,128>r?(t.g+=5,J(t),n>>>0):(t.g+=5,128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]?(t.j=!0,j(),n):(J(t),n))))))}V.prototype.reset=function(){this.g=this.l};var $=[];function Z(){this.g=new Uint8Array(64),this.h=0}function Q(t,e){if(!(t.h+1<t.g.length)){var r=t.g;t.g=new Uint8Array(Math.ceil(1+2*t.g.length)),t.g.set(r)}t.g[t.h++]=e}function tt(t,e){for(;127<e;)Q(t,127&e|128),e>>>=7;Q(t,e)}function et(t){var e={},r=void 0!==e.N&&e.N;this.m={u:void 0!==e.u&&e.u},this.N=r,e=this.m,$.length?(r=$.pop(),e&&(r.u=e.u),t&&z(r,t),t=r):t=new V(t,e),this.g=t,this.l=this.g.g,this.h=this.i=-1,this.j=!1}function rt(t){var e=t.g;if((e=e.g==e.i)||(e=t.j)||(e=(e=t.g).j||0>e.g||e.g>e.i),e)return!1;t.l=t.g.g;var r=q(t.g);return e=r>>>3,0<=(r&=7)&&5>=r?(t.i=e,t.h=r,!0):(t.j=!0,A(r,t.l),!1)}function nt(t){switch(t.h){case 0:if(0!=t.h)nt(t);else t:{for(var e=(t=t.g).g,r=0;10>r;r++){if(0==(128&t.h[e])){t.g=e+1,J(t);break t}e++}t.j=!0,j()}break;case 1:(t=t.g).g+=8,J(t);break;case 2:2!=t.h?nt(t):(e=q(t.g),(t=t.g).g+=e,J(t));break;case 5:(t=t.g).g+=4,J(t);break;case 3:for(e=t.i;;){if(!rt(t)){t.j=!0,L(Error("Unmatched start-group tag: stream EOF"));break}if(4==t.h){t.i!=e&&(t.j=!0,L(Error("Unmatched end-group tag")));break}nt(t)}break;default:t.j=!0,A(t.h,t.l)}}function it(t,e,r){t.N||(t=W(t.g.h,r,t.g.g),(r=e.m)?r.push(t):e.m=[t])}Z.prototype.length=function(){return this.h},Z.prototype.end=function(){var t=this.g,e=this.h;return this.h=0,W(t,0,e)},et.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};var ot=[];function at(){this.h=[],this.i=0,this.g=new Z}function st(t,e){0!==e.length&&(t.h.push(e),t.i+=e.length)}function ut(t,e,r){tt(t.g,8*e+2),tt(t.g,r.length),st(t,t.g.end()),st(t,r)}var ct,lt="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function ft(t,e){Object.isFrozen(t)||(lt?t[lt]|=e:void 0!==t.g?t.g|=e:Object.defineProperties(t,{g:{value:e,configurable:!0,writable:!0,enumerable:!1}}))}function ht(t){return t?null==(e=lt?t[lt]:t.g)?0:e:0;var e}function pt(t){return Array.isArray(t)?(ft(t,1),t):t}function dt(t){if(!Array.isArray(t))throw Error("cannot mark non-array as immutable");ft(t,2)}function vt(t){return null!==t&&"object"==typeof t&&t.constructor===Object}function gt(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":return B&&null!=t&&t instanceof Uint8Array?H(t):t;default:return t}}function yt(t,e){if(null!=t)return Array.isArray(t)||vt(t)?mt(t,e):e(t)}function mt(t,e){if(Array.isArray(t)){for(var r=Array(t.length),n=0;n<t.length;n++)r[n]=yt(t[n],e);return 1&ht(t)&&pt(r),r}for(n in r={},t)r[n]=yt(t[n],e);return r}function bt(t,e,r){var n=ct;if(ct=null,t||(t=n),n=this.constructor.ca,t||(t=n?[n]:[]),this.j=(n?0:-1)-(this.constructor.aa||0),this.i=null,this.g=t,t=(n=this.g.length)-1,n&&vt(n=this.g[t])?(this.l=t-this.j,this.h=n):void 0!==e&&-1<e?(this.l=Math.max(e,t+1-this.j),this.h=null):this.l=Number.MAX_VALUE,r)for(e=0;e<r.length;e++)(t=r[e])<this.l?(t+=this.j,(n=this.g[t])?pt(n):this.g[t]=Ot):(_t(this),(n=this.h[t])?pt(n):this.h[t]=Ot)}var wt,Et,Ot=Object.freeze(pt([]));function _t(t){var e=t.l+t.j;t.g[e]||(t.h=t.g[e]={})}function Tt(t,e,r){return-1===e?null:void 0!==r&&r||e>=t.l?t.h?t.h[e]:void 0:t.g[e+t.j]}function kt(t,e,r){r=void 0===r||r;var n=void 0!==n&&n,i=Tt(t,e,n);return null==i&&(i=Ot),i===Ot?Lt(t,e,i=pt([]),n):r&&Array.isArray(i)&&2&ht(i)&&Lt(t,e,i=i.slice(),n),i}function Rt(t,e,r){return null==(t=null==(t=Tt(t,e))?t:+t)?void 0===r?0:r:t}function Lt(t,e,r,n){void 0!==n&&n||e>=t.l?(_t(t),t.h[e]=r):t.g[e+t.j]=r}function At(t,e,r){t.i||(t.i={});var n=t.i[r];if(!n){var i=kt(t,r,!1);n=[];for(var o=!!Array.isArray(i)&&!!(2&ht(i)),a=0;a<i.length;a++)n[a]=new e(i[a]),o&&dt(n[a].g);o&&(dt(n),Object.freeze(n)),t.i[r]=n}return n}function jt(t,e,r,n,i){var o=At(t,n,e);r=r||new n,t=kt(t,e),null!=i?(o.splice(i,0,r),t.splice(i,0,xt(r))):(o.push(r),t.push(xt(r)))}function xt(t){if(t.i)for(var e in t.i){var r=t.i[e];if(Array.isArray(r))for(var n=0;n<r.length;n++)r[n]&&xt(r[n]);else r&&xt(r)}return t.g}function Pt(t,e){return null==(t=Tt(t,e))?0:t}function St(t,e){return null==(t=Tt(t,e))?"":t}function Ft(t,e){if(t=t.m){st(e,e.g.end());for(var r=0;r<t.length;r++)st(e,t[r])}}function It(t){var e=t[0];switch(t.length){case 2:var r=t[1];return function(t,n,i){return e(t,n,i,r)};case 3:var n=t[1],i=t[2];return function(t,r,o){return e(t,r,o,n,i)};case 4:var o=t[1],a=t[2],s=t[3];return function(t,r,n){return e(t,r,n,o,a,s)};default:throw Error("unsupported number of parameters, expected [2-4], got "+t.length)}}function Nt(t,e,r){for(;rt(e)&&4!=e.h;){var n=e.i,i=r[n];if(i){if(Array.isArray(i)&&(i=r[n]=It(i)),!i(e,t,n)){i=t;var o=(n=e).l;nt(n),it(n,i,o)}}else i=t,o=(n=e).l,nt(n),it(n,i,o)}return t}function Dt(t,e){var r=new at;if(e(t,r),0===(t=r.i+r.g.length()))r=new Uint8Array(0);else{t=new Uint8Array(t);for(var n=r.h,i=n.length,o=e=0;o<i;o++){var a=n[o];0!==a.length&&(t.set(a,e),e+=a.length)}0!==(i=(n=r.g).h)&&(t.set(n.g.subarray(0,i),e),n.h=0),r.h=[t],r=t}return r}function Mt(t,e,r){if(ot.length){var n=ot.pop();t&&(z(n.g,t),n.i=-1,n.h=-1),t=n}else t=new et(t);try{return r(new e,t)}finally{(e=t.g).h=null,e.l=0,e.i=0,e.g=0,e.j=!1,e.u=!1,t.i=-1,t.h=-1,t.j=!1,100>ot.length&&ot.push(t)}}function Ht(t,e,r){if(null!=(e=Tt(e,r))){tt(t.g,8*r+5),t=t.g;var n=e;0===(n=(r=0>n?1:0)?-n:n)?0<1/n?X=0:(0,X=2147483648):isNaN(n)?(0,X=2147483647):34028234663852886e22<n?(0,X=(r<<31|2139095040)>>>0):11754943508222875e-54>n?(n=Math.round(n/Math.pow(2,-149)),0,X=(r<<31|n)>>>0):(e=Math.floor(Math.log(n)/Math.LN2),n*=Math.pow(2,-e),16777216<=(n=Math.round(8388608*n))&&++e,0,X=(r<<31|e+127<<23|8388607&n)>>>0),Q(t,(r=X)>>>0&255),Q(t,r>>>8&255),Q(t,r>>>16&255),Q(t,r>>>24&255)}}function Ct(t,e,r){if(5!==t.h)return!1;var n=(t=t.g).h[t.g],i=t.h[t.g+1],o=t.h[t.g+2],a=t.h[t.g+3];return t.g+=4,J(t),t=2*((i=(n<<0|i<<8|o<<16|a<<24)>>>0)>>31)+1,n=i>>>23&255,i&=8388607,Lt(e,r,255==n?i?NaN:1/0*t:0==n?t*Math.pow(2,-149)*i:t*Math.pow(2,n-150)*(i+Math.pow(2,23))),!0}function Ut(t,e,r){if(0!==t.h)return!1;for(var n=t.g,i=128,o=0,a=t=0;4>a&&128<=i;a++)o|=(127&(i=n.h[n.g++]))<<7*a;if(128<=i&&(o|=(127&(i=n.h[n.g++]))<<28,t|=(127&i)>>4),128<=i)for(a=0;5>a&&128<=i;a++)t|=(127&(i=n.h[n.g++]))<<7*a+3;return 128>i?(n=o>>>0,(t=2147483648&(i=t>>>0))&&(i=~i>>>0,0==(n=1+~n>>>0)&&(i=i+1>>>0)),n=4294967296*i+(n>>>0),t=t?-n:n):(n.j=!0,j(),t=void 0),Lt(e,r,t),!0}function Gt(t,e,r){return 0===t.h&&(Lt(e,r,q(t.g)),!0)}function Bt(t,e,r){if(2!==t.h)return!1;var n,i=q(t.g),o=(t=t.g).g;if(t.g+=i,J(t),t=t.h,F)(n=P)||(n=P=new TextDecoder("utf-8",{fatal:!1})),n=n.decode(t.subarray(o,o+i));else{i=o+i;for(var a,s,u,c=[],l=null;o<i;)128>(a=t[o++])?c.push(a):224>a?o>=i?c.push(65533):(s=t[o++],194>a||128!=(192&s)?(o--,c.push(65533)):c.push((31&a)<<6|63&s)):240>a?o>=i-1?c.push(65533):128!=(192&(s=t[o++]))||224===a&&160>s||237===a&&160<=s||128!=(192&(n=t[o++]))?(o--,c.push(65533)):c.push((15&a)<<12|(63&s)<<6|63&n):244>=a?o>=i-2?c.push(65533):128!=(192&(s=t[o++]))||0!=s-144+(a<<28)>>30||128!=(192&(n=t[o++]))||128!=(192&(u=t[o++]))?(o--,c.push(65533)):(a=(7&a)<<18|(63&s)<<12|(63&n)<<6|63&u,a-=65536,c.push(55296+(a>>10&1023),56320+(1023&a))):c.push(65533),8192<=c.length&&(l=x(l,c),c.length=0);n=x(l,c)}return Lt(e,r,n),!0}function Kt(t,e,r,n,i){if(2!==t.h)return!1;var o=new n,a=t.g.i,s=q(t.g),u=t.g.g+s;if(t.g.i=u,i(o,t),0!==(i=u-t.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+s+" bytes, instead read "+(s-i)+" bytes, either the data ended unexpectedly or the message misreported its own length");return t.g.g=u,t.g.i=a,jt(e,r,o,n,void 0),!0}function Yt(t){bt.call(this,t)}function Wt(t,e){var r=Tt(t,1);if(null!=r&&null!=r){tt(e.g,8);var n=e.g;if(0<=r)tt(n,r);else{for(var i=0;9>i;i++)Q(n,127&r|128),r>>=7;Q(n,1)}}Ht(e,t,2),null!=(n=Tt(t,3))&&ut(e,3,N(n)),null!=(n=Tt(t,4))&&ut(e,4,N(n)),Ft(t,e)}function Xt(t,e){return Nt(t,e,wt||(wt={1:Gt,2:Ct,3:Bt,4:Bt}))}function Vt(t){bt.call(this,t,-1,$t)}function zt(t,e){return Nt(t,e,Et||(Et={1:[Kt,Yt,Xt]}))}bt.prototype.toJSON=function(){return mt(xt(this),gt)},bt.prototype.toString=function(){return xt(this).toString()},d(Yt,bt),d(Vt,bt),Vt.prototype.addClassification=function(t,e){return jt(this,1,t,Yt,e),this};var Jt,qt,$t=[1];function Zt(t){bt.call(this,t)}function Qt(t,e){Ht(e,t,1),Ht(e,t,2),Ht(e,t,3),Ht(e,t,4),Ht(e,t,5),Ft(t,e)}function te(t,e){return Nt(t,e,Jt||(Jt={1:Ct,2:Ct,3:Ct,4:Ct,5:Ct}))}function ee(t){bt.call(this,t,-1,ie)}function re(t,e){return Nt(t,e,qt||(qt={1:[Kt,Zt,te]}))}d(Zt,bt),d(ee,bt);var ne,ie=[1];function oe(t){bt.call(this,t)}function ae(t,e){Ht(e,t,1),Ht(e,t,2),Ht(e,t,3),Ht(e,t,4),Ht(e,t,5);var r=Tt(t,6);if(null!=r&&null!=r){tt(e.g,48);var n=e.g,i=r;r=0>i;var o=(i=Math.abs(i))>>>0;for(i=Math.floor((i-o)/4294967296),i>>>=0,r&&(i=~i>>>0,4294967295<(o=1+(~o>>>0))&&(o=0,4294967295<++i&&(i=0))),r=X=o,o=i;0<o||127<r;)Q(n,127&r|128),r=(r>>>7|o<<25)>>>0,o>>>=7;Q(n,r)}Ft(t,e)}function se(t,e){return Nt(t,e,ne||(ne={1:Ct,2:Ct,3:Ct,4:Ct,5:Ct,6:Ut}))}function ue(t,e,r){if(r=t.createShader(0===r?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+t.getShaderInfoLog(r));return r}function ce(t){return At(t,Yt,1).map((function(t){return{index:Pt(t,1),X:Rt(t,2),label:null!=Tt(t,3)?St(t,3):void 0,displayName:null!=Tt(t,4)?St(t,4):void 0}}))}function le(t){return{x:Rt(t,1),y:Rt(t,2),z:Rt(t,3),visibility:null!=Tt(t,4)?Rt(t,4):void 0}}function fe(t){return At(Mt(t,ee,re),Zt,1).map(le)}function he(t,e){this.h=t,this.g=e,this.l=0}function pe(t,e,r){return function(t,e){var r=t.g;if(void 0===t.m){var n=ue(r,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=ue(r,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+r.getProgramInfoLog(o));n=t.m=o,r.useProgram(n),i=r.getUniformLocation(n,"sampler0"),t.j={I:r.getAttribLocation(n,"aVertex"),H:r.getAttribLocation(n,"aTex"),da:i},t.s=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,t.s),r.enableVertexAttribArray(t.j.I),r.vertexAttribPointer(t.j.I,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),t.o=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,t.o),r.enableVertexAttribArray(t.j.H),r.vertexAttribPointer(t.j.H,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),r.uniform1i(i,0)}n=t.j,r.useProgram(t.m),r.canvas.width=e.width,r.canvas.height=e.height,r.viewport(0,0,e.width,e.height),r.activeTexture(r.TEXTURE0),t.h.bindTexture2d(e.glName),r.enableVertexAttribArray(n.I),r.bindBuffer(r.ARRAY_BUFFER,t.s),r.vertexAttribPointer(n.I,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n.H),r.bindBuffer(r.ARRAY_BUFFER,t.o),r.vertexAttribPointer(n.H,2,r.FLOAT,!1,0,0),r.bindFramebuffer(r.DRAW_FRAMEBUFFER?r.DRAW_FRAMEBUFFER:r.FRAMEBUFFER,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.colorMask(!0,!0,!0,!0),r.drawArrays(r.TRIANGLE_FAN,0,4),r.disableVertexAttribArray(n.I),r.disableVertexAttribArray(n.H),r.bindBuffer(r.ARRAY_BUFFER,null),t.h.bindTexture2d(0)}(t,e),"function"==typeof t.g.canvas.transferToImageBitmap?Promise.resolve(t.g.canvas.transferToImageBitmap()):r?Promise.resolve(t.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(t.g.canvas):(void 0===t.i&&(t.i=document.createElement("canvas")),new Promise((function(e){t.i.height=t.g.canvas.height,t.i.width=t.g.canvas.width,t.i.getContext("2d",{}).drawImage(t.g.canvas,0,0,t.g.canvas.width,t.g.canvas.height),e(t.i)})))}function de(t){this.g=t}d(oe,bt);var ve=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function ge(t,e){return e+t}function ye(t,e){window[t]=e}function me(t){if(this.g=t,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=t&&t.locateFile||ge,"object"==typeof window)var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=e,t.options)for(var r=(e=s(Object.keys(t.options))).next();!r.done;r=e.next()){r=r.value;var n=t.options[r].default;void 0!==n&&(this.j[r]="function"==typeof n?n():n)}}function be(t){var e,r,n,i,o,a,s,c,l,f,h;return _((function(p){switch(p.g){case 1:return t.R?(e=void 0===t.g.files?[]:"function"==typeof t.g.files?t.g.files(t.j):t.g.files,m(p,_((function(t){switch(t.g){case 1:return t.m=2,m(t,WebAssembly.instantiate(ve),4);case 4:t.g=3,t.m=0;break;case 2:return t.m=0,t.j=null,t.return(!1);case 3:return t.return(!0)}})),2)):p.return();case 2:if(r=p.h,"object"==typeof window)return ye("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),ye("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),a=e.filter((function(t){return void 0!==t.data})),s=e.filter((function(t){return void 0===t.data})),c=Promise.all(a.map((function(e){var r=we(t,e.url);if(void 0!==e.path){var n=e.path;r=r.then((function(e){return t.overrideFile(n,e),Promise.resolve(e)}))}return r}))),l=Promise.all(s.map((function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r?function(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise((function(t){e.addEventListener("load",(function(){t()}),!1),e.addEventListener("error",(function(){t()}),!1),document.body.appendChild(e)}))}(t.locateFile(e.url,t.S)):Promise.resolve()}))).then((function(){var e,r,n;return _((function(i){if(1==i.g)return e=window.createMediapipeSolutionsWasm,r=window.createMediapipeSolutionsPackedAssets,n=t,m(i,e(r),2);n.h=i.h,i.g=0}))})),f=_((function(e){return t.g.graph&&t.g.graph.url?e=m(e,we(t,t.g.graph.url),0):(e.g=0,e=void 0),e})),m(p,Promise.all([l,c,f]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return n=e.filter((function(t){return void 0===t.simd||t.simd&&r||!t.simd&&!r})).map((function(e){return t.locateFile(e.url,t.S)})),importScripts.apply(null,u(n)),i=t,m(p,createMediapipeSolutionsWasm(Module),6);case 6:i.h=p.h,t.l=new OffscreenCanvas(1,1),t.h.canvas=t.l,o=t.h.GL.createContext(t.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),t.h.GL.makeContextCurrent(o),p.g=4;break;case 7:if(t.l=document.createElement("canvas"),!(h=t.l.getContext("webgl2",{}))&&!(h=t.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),p.return();t.D=h,t.h.canvas=t.l,t.h.createContext(t.l,!0,!0,{});case 4:t.i=new t.h.SolutionWasm,t.R=!1,p.g=0}}))}function we(t,e){var r,n;return _((function(i){return e in t.F?i.return(t.F[e]):(r=t.locateFile(e,""),n=fetch(r).then((function(t){return t.arrayBuffer()})),t.F[e]=n,i.return(n))}))}function Ee(t,e,r){var n,i,o,a,u,c,l,f,h,p,d,v,g,y;return _((function(b){switch(b.g){case 1:if(!r)return b.return(e);for(n={},i=0,o=s(Object.keys(r)),a=o.next();!a.done;a=o.next())u=a.value,"string"!=typeof(c=r[u])&&"texture"===c.type&&void 0!==e[c.stream]&&++i;1<i&&(t.G=!1),l=s(Object.keys(r)),a=l.next();case 2:if(a.done){b.g=4;break}if(f=a.value,"string"==typeof(h=r[f]))return g=n,y=f,m(b,function(t,e,r){var n;return _((function(i){return"number"==typeof r||r instanceof Uint8Array||r instanceof t.h.Uint8BlobList?i.return(r):r instanceof t.h.Texture2dDataOut?((n=t.s[e])||(n=new he(t.h,t.D),t.s[e]=n),i.return(pe(n,r,t.G))):i.return(void 0)}))}(t,f,e[h]),14);if(p=e[h.stream],"detection_list"===h.type){if(p){for(var w=p.getRectList(),E=p.getLandmarksList(),O=p.getClassificationsList(),T=[],k=0;k<w.size();++k){var R=Mt(w.get(k),oe,se);R={T:{Y:Rt(R,1),Z:Rt(R,2),height:Rt(R,3),width:Rt(R,4),rotation:Rt(R,5,0),W:Pt(R,6)},O:fe(E.get(k)),M:ce(Mt(O.get(k),Vt,zt))},T.push(R)}w=T}else w=[];n[f]=w,b.g=7;break}if("proto_list"===h.type){if(p){for(w=Array(p.size()),E=0;E<p.size();E++)w[E]=p.get(E);p.delete()}else w=[];n[f]=w,b.g=7;break}if(void 0===p){b.g=3;break}if("float_list"===h.type){n[f]=p,b.g=7;break}if("proto"===h.type){n[f]=p,b.g=7;break}if("texture"!==h.type)throw Error("Unknown output config type: '"+h.type+"'");return(d=t.s[f])||(d=new he(t.h,t.D),t.s[f]=d),m(b,pe(d,p,t.G),13);case 13:v=b.h,n[f]=v;case 7:h.transform&&n[f]&&(n[f]=h.transform(n[f])),b.g=3;break;case 14:g[y]=b.h;case 3:a=l.next(),b.g=2;break;case 4:return b.return(n)}}))}function Oe(t,e){for(var r=e.name||"$",n=[].concat(u(e.wants)),i=new t.h.StringList,o=s(e.wants),a=o.next();!a.done;a=o.next())i.push_back(a.value);o=t.h.PacketListener.implement({onResults:function(i){for(var o={},a=0;a<e.wants.length;++a)o[n[a]]=i.get(a);var s=t.listeners[r];s&&(t.C=Ee(t,o,e.outs).then((function(r){r=s(r);for(var i=0;i<e.wants.length;++i){var a=o[n[i]];"object"==typeof a&&a.hasOwnProperty&&a.hasOwnProperty("delete")&&a.delete()}r&&(t.C=r)})))}}),t.i.attachMultiListener(i,o),i.delete()}function _e(t){switch(void 0===t&&(t=0),t){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function Te(t){var e=this;t=t||{},this.g=new me({locateFile:t.locateFile,files:function(t){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:_e(t.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:fe},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:fe},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(t){var r,n,i;return _((function(o){return 1==o.g?(r=_e(t),n="third_party/mediapipe/modules/pose_landmark/"+r,m(o,we(e.g,r),2)):(i=o.h,e.g.overrideFile(n,i),o.return(!0))}))}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}(t=me.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},t.reset=function(){var t=this;return _((function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0}))},t.setOptions=function(t,e){var r=this;if(e=e||this.g.options){for(var n=[],i=[],o={},a=s(Object.keys(t)),u=a.next();!u.done;o={K:o.K,L:o.L},u=a.next()){var c=u.value;c in this.j&&this.j[c]===t[c]||(this.j[c]=t[c],void 0!==(u=e[c])&&(u.onChange&&(o.K=u.onChange,o.L=t[c],n.push(function(t){return function(){return _((function(e){if(1==e.g)return m(e,t.K(t.L),2);!0===e.h&&(r.o=!0),e.g=0}))}}(o))),u.graphOptionXref&&(c={valueNumber:1===u.type?t[c]:0,valueBoolean:0===u.type&&t[c],valueString:2===u.type?t[c]:""},u=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),u.graphOptionXref),c),i.push(u))))}0===n.length&&0===i.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(i),this.v=(void 0===this.v?[]:this.v).concat(n))}},t.initialize=function(){var t=this;return _((function(e){return 1==e.g?m(e,be(t),2):3!=e.g?m(e,function(t){var e,r,n,i,o,a,u,c;return _((function(l){if(1==l.g)return t.g.graph&&t.g.graph.url&&t.P===t.g.graph.url?l.return():(t.o=!0,t.g.graph&&t.g.graph.url?(t.P=t.g.graph.url,m(l,we(t,t.g.graph.url),3)):void(l.g=2));for(2!=l.g&&(e=l.h,t.i.loadGraph(e)),r=s(Object.keys(t.B)),n=r.next();!n.done;n=r.next())i=n.value,t.i.overrideFile(i,t.B[i]);if(t.B={},t.g.listeners)for(o=s(t.g.listeners),a=o.next();!a.done;a=o.next())u=a.value,Oe(t,u);c=t.j,t.j={},t.setOptions(c),l.g=0}))}(t),3):m(e,function(t){var e,r,n,i,o,a;return _((function(u){switch(u.g){case 1:if(!t.o)return u.return();if(!t.v){u.g=2;break}e=s(t.v),r=e.next();case 3:if(r.done){u.g=5;break}return m(u,(0,r.value)(),4);case 4:r=e.next(),u.g=3;break;case 5:t.v=void 0;case 2:if(t.A){for(n=new t.h.GraphOptionChangeRequestList,i=s(t.A),o=i.next();!o.done;o=i.next())a=o.value,n.push_back(a);t.i.changeOptions(n),n.delete(),t.A=void 0}t.o=!1,u.g=0}}))}(t),0)}))},t.overrideFile=function(t,e){this.i?this.i.overrideFile(t,e):this.B[t]=e},t.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},t.send=function(t,e){var r,n,i,o,a,u,c,l,f,h=this;return _((function(p){switch(p.g){case 1:return h.g.inputs?(r=1e3*(null==e?performance.now():e),m(p,h.C,2)):p.return();case 2:return m(p,h.initialize(),3);case 3:for(n=new h.h.PacketDataList,i=s(Object.keys(t)),o=i.next();!o.done;o=i.next())if(a=o.value,u=h.g.inputs[a]){t:{var d=t[a];switch(u.type){case"video":var v=h.m[u.stream];if(v||(v=new he(h.h,h.D),h.m[u.stream]=v),0===v.l&&(v.l=v.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&d instanceof HTMLVideoElement)var g=d.videoWidth,y=d.videoHeight;else"undefined"!=typeof HTMLImageElement&&d instanceof HTMLImageElement?(g=d.naturalWidth,y=d.naturalHeight):(g=d.width,y=d.height);y={glName:v.l,width:g,height:y},(g=v.g).canvas.width=y.width,g.canvas.height=y.height,g.activeTexture(g.TEXTURE0),v.h.bindTexture2d(v.l),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,d),v.h.bindTexture2d(0),v=y;break t;case"detections":for((v=h.m[u.stream])||(v=new de(h.h),h.m[u.stream]=v),v.data||(v.data=new v.g.DetectionListData),v.data.reset(d.length),y=0;y<d.length;++y){g=d[y];var b=v.data,w=b.setBoundingBox,E=y,O=g.T,_=new oe;if(Lt(_,1,O.Y),Lt(_,2,O.Z),Lt(_,3,O.height),Lt(_,4,O.width),Lt(_,5,O.rotation),Lt(_,6,O.W),O=Dt(_,ae),w.call(b,E,O),g.O)for(b=0;b<g.O.length;++b){var T=!!(_=g.O[b]).visibility;E=(w=v.data).addNormalizedLandmark,O=y,_=Object.assign(Object.assign({},_),{visibility:T?_.visibility:0}),Lt(T=new Zt,1,_.x),Lt(T,2,_.y),Lt(T,3,_.z),_.visibility&&Lt(T,4,_.visibility),_=Dt(T,Qt),E.call(w,O,_)}if(g.M)for(b=0;b<g.M.length;++b)E=(w=v.data).addClassification,O=y,_=g.M[b],Lt(T=new Yt,2,_.X),_.index&&Lt(T,1,_.index),_.label&&Lt(T,3,_.label),_.displayName&&Lt(T,4,_.displayName),_=Dt(T,Wt),E.call(w,O,_)}v=v.data;break t;default:v={}}}switch(c=v,l=u.stream,u.type){case"video":n.pushTexture2d(Object.assign(Object.assign({},c),{stream:l,timestamp:r}));break;case"detections":(f=c).stream=l,f.timestamp=r,n.pushDetectionList(f);break;default:throw Error("Unknown input config type: '"+u.type+"'")}}return h.i.send(n),m(p,h.C,4);case 4:n.delete(),p.g=0}}))},t.onResults=function(t,e){this.listeners[e||"$"]=t},R("Solution",me),R("OptionType",{BOOL:0,NUMBER:1,$:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(t=Te.prototype).reset=function(){this.g.reset()},t.close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(t){this.g.onResults(t)},t.initialize=function(){var t=this;return _((function(e){return m(e,t.g.initialize(),0)}))},t.send=function(t,e){var r=this;return _((function(n){return m(n,r.g.send(t,e),0)}))},t.setOptions=function(t){this.g.setOptions(t)},R("Pose",Te),R("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),R("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),R("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),R("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),R("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),R("VERSION","0.5.1635988162")}).call(this)},666:t=>{var e=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new L(n||[]);return o._invoke=function(t,e,r){var n=l;return function(i,o){if(n===h)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return j()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=T(a,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var u=c(t,e,r);if("normal"===u.type){if(n=r.done?p:f,u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(t,r,a),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l="suspendedStart",f="suspendedYield",h="executing",p="completed",d={};function v(){}function g(){}function y(){}var m={};m[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(A([])));w&&w!==r&&n.call(w,o)&&(m=w);var E=y.prototype=v.prototype=Object.create(m);function O(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function _(t,e){function r(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,n){function o(){return new e((function(e,i){r(t,n,e,i)}))}return i=i?i.then(o,o):o()}}function T(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=c(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function A(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:j}}function j(){return{value:e,done:!0}}return g.prototype=E.constructor=y,y.constructor=g,y[s]=g.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},O(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new _(u(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),E[s]="Generator",E[o]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=A,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;R(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:A(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function e(e,r){return function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return o}}(e,r)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function s(t){i(a,n,o,s,u,"next",t)}function u(t){i(a,n,o,s,u,"throw",t)}s(void 0)}))}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return c(t)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=v(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?t:r):i.value}}).apply(this,arguments)}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.r(n),r.d(n,{MediaPipeClient:()=>ft,MediaPipePlayer:()=>pt,MediaPipePose:()=>ht,MediaPipeSmoothPose:()=>dt,Skeleton:()=>vt});var m=r(757),b=r.n(m),w=r(264);function E(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _=function(){function t(){a(this,t),this.listeners=new Map}var e;return u(t,[{key:"addEventListener",value:function(t,e,r){(T(this.listeners,t)||function(t,e){var r=[];return t.set(e,r),r}(this.listeners,t)).push(e)}},{key:"triggerEventListener",value:function(t,e){var r,n=T(this.listeners,t)||[],i=new k(e),o=[],a=E(n);try{for(a.s();!(r=a.n()).done;){var s=(0,r.value)(i);o.push(s)}}catch(t){a.e(t)}finally{a.f()}return o}},{key:"triggerEventListenerAsync",value:(e=o(b().mark((function t(e,r){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.triggerEventListener(e,r));case 2:case"end":return t.stop()}}),t,this)}))),function(t,r){return e.apply(this,arguments)})},{key:"removeEventListener",value:function(t,e,r){var n,i,o,a,s=T(this.listeners,t)||[],u=!1;return s.length>0&&(i=e,o=(n=s).indexOf(i),a=!1,o>-1&&(n.splice(o,1),a=!0),u=a),0===s.length&&this.listeners.delete(t),u}}]),t}();function T(t,e){return t.get(e)}_.prototype.on=_.prototype.addEventListener,_.prototype.off=_.prototype.removeEventListener,_.prototype.emit=_.prototype.triggerEventListener;var k=u((function t(e){a(this,t),this.data=e}));function R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function j(){return x.apply(this,arguments)}function x(){return(x=o(b().mark((function t(){var e,r,n,i,o,a,s,u=arguments;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=u.length>0&&void 0!==u[0]?u[0]:{},r=e.width,n=e.height,i=e.constraints,o=void 0===i?{}:i,a=document.createElement("video"),navigator.mediaDevices){t.next=4;break}throw new Error("Please run with localhost or with on https://");case 4:return t.next=6,navigator.mediaDevices.getUserMedia(L({video:!0},o));case 6:return s=t.sent,t.abrupt("return",new Promise((function(t){a.onloadedmetadata=function(){a.muted=!0,a.width=r||a.videoWidth,a.height=n||a.videoHeight,t({stream:s,width:a.width,height:a.height,video:a})},a.srcObject=s})));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var P=function(t){f(i,t);var e,r,n=A(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,i),(t=n.call(this)).width,t.height,t.stream,t.video,Object.assign(c(t),e),t.lastTime=-1,t.animationFrame=null,t}return u(i,[{key:"play",value:function(){this.seekFrame(),this.video.play()}},{key:"stop",value:function(){}},{key:"seekFrame",value:(r=o(b().mark((function t(){var e;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.video.currentTime)===this.lastTime){t.next=5;break}return t.next=4,g(d(i.prototype),"triggerEventListenerAsync",this).call(this,"frame",this);case 4:this.lastTime=e;case 5:this.animationFrame=window.requestAnimationFrame(this.seekFrame.bind(this));case 6:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}],[{key:"getStream",value:(e=o(b().mark((function t(e){var r,n,i,o,a;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(e);case 2:return r=t.sent,n=r.video,i=r.width,o=r.height,a=r.stream,t.abrupt("return",new this({video:n,width:i,height:o,stream:a}));case 8:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),i}(_);const S=Object.freeze({smoothenDetection:.5,cameraConstraints:{audio:!1,video:!0},mediaPipeOptions:{selfieMode:!1,modelComplexity:1,smoothLandmarks:!0,enableSegmentation:!1,smoothSegmentation:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}});function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function N(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}var D=function(t){f(i,t);var r,n=N(i);function i(){var t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,i),(e=n.call(this)).videoPlayer,e.pose,Object.assign(c(e),r),e.pose.onResults(function(){var r=o(b().mark((function r(n){return b().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:g((t=c(e),d(i.prototype)),"triggerEventListener",t).call(t,"pose",e.remapResults(n));case 1:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()),e.videoPlayer.addEventListener("frame",function(){var t=o(b().mark((function t(r){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pose.send({image:r.data.video});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e}return u(i,[{key:"remapResults",value:function(t){var e,r,n=t.poseLandmarks,i=t.poseWorldLandmarks;return n&&(e=this.constructor.remapLandmarks(n)),i&&(r=this.constructor.remapLandmarks(i)),{skeleton:e,skeletonNormalized:r,raw:t}}},{key:"getVideoPlayer",value:function(){return this.videoPlayer}},{key:"startDetection",value:function(){this.videoPlayer.play()}}],[{key:"remapLandmarks",value:function(t,r,n){return Object.fromEntries(this.LANDMARK_ENTRIES.map((function(r){var n=e(r,2),i=n[0],o=n[1];return[i,t[o]]})))}},{key:"create",value:(r=o(b().mark((function t(e){var r,n,i,o,a,s,u,c;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.cameraConstraints,n=e.width,i=e.height,o=e.mediaPipeOptions,a=e.smoothen,s=void 0===a?1:a,t.next=3,P.getStream({constraints:r,width:n,height:i});case 3:return u=t.sent,(c=new w.Pose({locateFile:function(t){return"/scripts/@mediapipe/pose/".concat(t)}})).setOptions(I({},o)),t.abrupt("return",new this({videoPlayer:u,pose:c,smoothen:s}));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}]),i}(_);y(D,"DEFAULT_CONFIG",S),y(D,"POSE_LANDMARKS",w.POSE_LANDMARKS),y(D,"LANDMARK_ENTRIES",Object.entries(w.POSE_LANDMARKS)),y(D,"LANDMARK_KEYS",["x","y","z","visibility"]);const M=D;function H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}var G=function(t){f(n,t);var e,r=U(n);function n(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,n),t=r.call(this);var i=C({video:document.createElement("video"),width:0,height:0,pose:null,stream:null},e);return Object.assign(c(t),i,e),window.parent===window?t.setupLocally():window.mediaPipe=c(t),t}return u(n,[{key:"setupLocally",value:(e=o(b().mark((function t(){var e,r;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("running locally"),t.next=3,M.create({cameraConstraints:S.cameraConstraints,mediaPipeOptions:S.mediaPipeOptions,smoothen:S.smoothenDetection});case 3:e=t.sent,r=e.getVideoPlayer(),e.startDetection(),this.setup({stream:r.stream,width:r.width,height:r.height,pose:e,mirrored:S.selfieMode});case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"setup",value:function(t){var e=t.stream,r=t.width,i=t.height,o=t.pose,a=t.mirrored,s=this.video;this.stream=e,this.height=i,this.width=r,this.pose=o,this.mirrored=a,s.srcObject=e,s.width=r,s.height=i,s.muted=!0,//! video must be muted for autoplay
s.play(),this.triggerPoseBinded=this.triggerPose.bind(this),//! must bind the function before to have exact copy
o.addEventListener("pose",this.triggerPoseBinded),g(d(n.prototype),"triggerEventListener",this).call(this,"setup",this),window.addEventListener("beforeunload",this.destroy.bind(this))}},{key:"triggerPose",value:function(t){g(d(n.prototype),"triggerEventListener",this).call(this,"pose",t.data)}},{key:"destroy",value:function(){this.pose.removeEventListener("pose",this.triggerPoseBinded)}}]),n}(_);window.MediaPipeClient=G;const B=G;var K=function(){function t(){a(this,t),this.time=performance.now(),this.startTime=0}return u(t,[{key:"stop",value:function(){return this.startTime=0,{duration:this.duration}}},{key:"now",value:function(){return performance.now()}},{key:"duration",get:function(){return this.now()-this.startTime}},{key:"start",value:function(){var t=this.now();this.startTime=t}},{key:"tick",value:function(){var t=this.now(),e=t-this.time;return this.time=t,{duration:this.duration,deltaTime:e}}}]),t}();function Y(t){return W.apply(this,arguments)}function W(){return(W=o(b().mark((function t(e){var r,n,i,o=arguments;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=o.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=o[i];return t.next=3,fetch.apply(void 0,[e].concat(n)).then((function(t){return t.json()}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function X(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function V(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,X(t,e,"get"))}function z(t,e,r){return function(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}(t,X(t,e,"set"),r),r}function J(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function q(t,e,r){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,r)}var $=new WeakMap;function Z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var i=d(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}var Q=function(t){f(r,t);var e=J(r);function r(t){var n;return a(this,r),q(c(n=e.call(this)),$,{writable:!0,value:void 0}),z(c(n),$,t.initState||""),n.actions=t.actions||[],n.states=t.states||{},n}return u(r,[{key:"emit",value:function(t){var e,n=this,i=this.states[V(this,$)][t];if(!i)throw new Error('"'.concat(t,'" not possible when in state "').concat(V(this,$),'"'));var o=V(this,$),a=i.to;z(this,$,a),null===(e=i.actions)||void 0===e||e.forEach((function(t){n.actions[t].call(n,o,a)})),g(d(r.prototype),"emit",this).call(this,t)}},{key:"state",get:function(){return V(this,$)}},{key:"is",value:function(t){return V(this,$)===t}}],[{key:"factory",value:function(t){return this.bind(this,t)}}]),r}(_).factory({initState:"idle",states:{idle:{startRecord:{to:"recording"},startPlayback:{to:"playing"}},playing:{stopPlayback:{to:"idle"}},recording:{stopRecord:{to:"idle"}}}}),tt=function(t){f(i,t);var r,n=Z(i);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,i),t=n.call(this);var r={frames:[],timer:new K,status:new Q,timeDrift:15};return Object.assign(c(t),r,e),t.clearRecording(),t.clearPlayback(),t.currFrameIndex=0,t.status.on("startRecord",(function(){t.timer.start()})),t.status.on("stopRecord",(function(){t.timer.stop()})),t.status.on("startPlayback",(function(){})),t}return u(i,[{key:"resumeRecord",value:function(){this.status.startRecord()}},{key:"clearRecording",value:function(){this.skippedFrames=0,this.frames.length=0}},{key:"stopRecord",value:function(){this.status.is("idle")||this.status.emit("stopRecord")}},{key:"startRecord",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.skipFrames,r=void 0===e?0:e,n=t.bufferMaxDuration,i=void 0===n?1/0:n;this.clearRecording(),this.skipFrames=r,this.bufferMaxDuration=i,this.status.emit("startRecord")}},{key:"update",value:function(t){if(this.status.is("recording"))if(this.skippedFrames<this.skipFrames)this.skippedFrames++;else{this.skippedFrames=0;var r=this.timer.tick(),n=r.deltaTime,i=r.duration,o=function(t,e){return[t,e]}(function(t){if(!t)return null;var r=new Array(M.LANDMARK_ENTRIES.length).fill(null);return Object.entries(t).forEach((function(t){var n=e(t,2),i=n[0],o=n[1],a=M.POSE_LANDMARKS[i];r[a]=[o.x,o.y,o.visibility]})),r}(t),n);i>this.bufferMaxDuration&&this.frames.shift(),this.frames.push(o)}}},{key:"startPlayback",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.loop,r=void 0!==e&&e;0!==this.frames.length&&(this.clearPlayback(),this.loop=r,this.status.emit("startPlayback"),this.updateFrame())}},{key:"updateFrame",value:function(){var t=e(this.frames[this.currFrameIndex],2),r=t[0],n=t[1];r=function(t){if(!t)return;var r={};return M.LANDMARK_ENTRIES.forEach((function(n){var i=e(n,2),o=i[0],a=i[1],s=e(t[a],4),u=s[0],c=s[1],l=s[2],f=s[3];r[o]={x:u,y:c,z:l,visibility:f}})),r}(r),0===this.currFrameIndex&&(n=0);var o=performance.now();this.playbackTime+n>o+this.timeDrift?this.requestFrame():(g(d(i.prototype),"triggerEventListener",this).call(this,"playbackpose",{recordedSkeleton:r}),this.playbackTime=o,this.currFrameIndex=(this.currFrameIndex+1)%this.frames.length,0!==this.currFrameIndex||this.loop?this.requestFrame():this.stopPlayback())}},{key:"requestFrame",value:function(){this.animationFrame=requestAnimationFrame(this.updateFrame.bind(this))}},{key:"stopPlayback",value:function(){cancelAnimationFrame(this.animationFrame),this.status.is("idle")||(this.status.emit("stopPlayback"),g(d(i.prototype),"triggerEventListener",this).call(this,"playbackstop"))}},{key:"clearPlayback",value:function(){this.loop=!1,this.currFrameIndex=0}},{key:"getRecording",value:function(){return{f:{frames:this.frames}.frames}}},{key:"setRecording",value:function(t){var e=t.f;this.frames=e}},{key:"is",value:function(t){return this.status.is(t)}}],[{key:"createFrom",value:(r=o(b().mark((function t(e){var r,n;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:return r=t.sent,(n=new this).setRecording(r),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}]),i}(_);window.MediaPipePlayer=tt;const et=tt;function rt(t,e,r){return Math.max(e,Math.min(t,r))}function nt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ot=M.LANDMARK_ENTRIES,at=M.LANDMARK_KEYS,st=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t),this.configure(e),this.landmarks=this.constructor.createLandmarks(),this.smoothedLandmarks=null,this.velocities=new WeakMap,this.timer=new K,this.isVisible=!1}return u(t,[{key:"configure",value:function(t){this.params=it({lerpAmount:.33,dampAmount:.1,dampMaxSpeed:1/0},t)}},{key:"onEachValue",value:function(t){
//! optimized but not readable
if(this.smoothedLandmarks){var e=at.length,r=this.smoothedLandmarks,n=this.landmarks;for(var i in r)for(var o=r[i],a=n[i],s=e;s--;){var u=at[s],c=t(o[u],a[u],u,o);o[u]=c}}}},{key:"target",value:function(t){var e;if((this.isVisible=Boolean(t),this.isVisible)&&(this.landmarks=t,!this.smoothedLandmarks))for(var r in this.smoothedLandmarks=(e=this.landmarks,JSON.parse(JSON.stringify(e))),this.smoothedLandmarks)this.velocities.set(this.smoothedLandmarks[r],this.constructor.createLandmark())}},{key:"lerp",value:function(){var t=this.params.lerpAmount;return this.onEachValue((function(e,r,n,i){return t*(r-(o=e))+o;var o})),this.getSmoothedLandmarks()}},{key:"smoothDamp",value:function(){var t=this,e=this.params,r=e.dampMaxSpeed,n=e.dampAmount,i=this.timer.tick().deltaTime/1e3;return this.onEachValue((function(e,o,a,s){var u=t.velocities.get(s),c=function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=2/(n=Math.max(1e-4,n)),s=a*o,u=1/(1+s+.48*s*s+.235*s*s*s),c=t-e,l=e,f=i*n,h=(r+a*(c=rt(c,-f,f)))*o;r=(r-a*h)*u;var p=(e=t-c)+(c+h)*u;return l-t>0==p>l&&(r=((p=l)-l)/o),{result:p,velocity:r}}(e,o,u[a],n,r,i),l=c.result,f=c.velocity;return u[a]=f,l})),this.getSmoothedLandmarks()}},{key:"getSmoothedLandmarks",value:function(){if(this.isVisible)return this.smoothedLandmarks}}],[{key:"createLandmarks",value:function(){var t=this;return Object.fromEntries(ot.map((function(r){return[e(r,1)[0],t.createLandmark()]})))}},{key:"createLandmark",value:function(){return it({},this.DEFAULT_LANDMARK)}}]),t}();y(st,"DEFAULT_LANDMARK",Object.fromEntries(at.map((function(t){return[t,0]})))),window.MediaPipeSmoothPose=st;const ut=st;var ct=["NOSE","LEFT_EYE_INNER","LEFT_EYE","LEFT_EYE_OUTER","RIGHT_EYE_INNER","RIGHT_EYE","RIGHT_EYE_OUTER","LEFT_EAR","RIGHT_EAR","LEFT_RIGHT","RIGHT_LEFT","LEFT_SHOULDER","RIGHT_SHOULDER","LEFT_ELBOW","RIGHT_ELBOW","LEFT_WRIST","RIGHT_WRIST","LEFT_PINKY","RIGHT_PINKY","LEFT_INDEX","RIGHT_INDEX","LEFT_THUMB","RIGHT_THUMB","LEFT_HIP","RIGHT_HIP","LEFT_KNEE","RIGHT_KNEE","LEFT_ANKLE","RIGHT_ANKLE","LEFT_HEEL","RIGHT_HEEL","LEFT_FOOT_INDEX","RIGHT_FOOT_INDEX"],lt=function(){function t(){a(this,t),this.result,this.width,this.height}return u(t,[{key:"update",value:function(t){this.result=t}},{key:"show",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.color,i=void 0===n?"red":n;if(this.result){t.save();var o=t.canvas,a=o.width,s=o.height;t.beginPath(),t.strokeStyle=i,t.lineWidth=10,t.lineCap="round",ct.forEach((function(r){var n=e.result[r];e.drawPoint(t,{x:n.x*a,y:n.y*s})})),t.stroke(),t.restore()}}},{key:"drawPoint",value:function(t,e){var r=e.x,n=e.y;t.moveTo(r,n),t.lineTo(r+.01,n)}}]),t}();window.Skeleton=lt;var ft=B,ht=M,pt=et,dt=ut,vt=lt})(),n})()}));
//# sourceMappingURL=index.js.map