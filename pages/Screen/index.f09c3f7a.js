var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequirefeea;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var s={id:e,exports:{}};return t[e]=s,n.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},e.parcelRequirefeea=n);class s extends class{constructor(){this._events={}}addEventListener(e,t){const o=this._events;(o[e]=o[e]||[]).push(t)}emit(e,t){const o=this._events[e];o&&o.forEach(((e,o)=>{e.apply(null,t)}))}removeEventListener(e){delete this._events[e]}}{constructor(){super(),this.handlers={open:this.onOpenWSConnection.bind(this),error:this.onWSError.bind(this),message:this.onWSMessage.bind(this)},this.checkWebsocketAvailibility()}checkWebsocketAvailibility(){window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket?this.initConnection():alert("Il faut utiliser un autre navigateur. Chrome par exemple.")}initConnection(){this.connection=new WebSocket(`ws://${window.location.host}`),this.connection.onopen=this.handlers.open,this.connection.onerror=this.handlers.error,this.connection.onmessage=this.handlers.message}onOpenWSConnection(e){console.log("::open connection::",e)}onWSError(e){console.log("::error::",e)}onWSMessage(e){console.log("::message::",e),this.emit("message",[JSON.parse(e.data)])}}class i{constructor(){console.log("iFrame is ok"),this.handlers={message:this.onMessage.bind(this),load:this.onIFrameLoaded.bind(this)},this.frame=document.getElementById("frame"),this.frame.src=frame.src,this.frame.addEventListener("load",this.handlers.load),this.socket=new s,this.socket.addEventListener("message",this.handlers.message),this.initData()}async initData(){this.studentsData=await class{constructor(){}static loadJSON(e){return fetch(e).then((e=>e.json())).then((e=>e))}}.loadJSON("/json/studentProjects.json")}onIFrameLoaded(e){console.log("::iframe loaded::",e),this.onFrameLoad(e)}onMessage(e){if("project_id"in e){const t=parseInt(e.project_id),o=this.studentsData.projects[t].url;this.frame.src=o+`?_v=${(new Date).getTime()}`}}onFrameLoad(e){}}var a=Object.freeze({smoothenDetection:.5,cameraConstraints:{audio:!1,video:!0},mediaPipeOptions:{selfieMode:!1,modelComplexity:1,smoothLandmarks:!0,enableSegmentation:!1,smoothSegmentation:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}}),r=n("hARZV");function c({player:e,pose:t,iframe:o}){const n=o.contentWindow?.mediaPipe;console.log(n),n&&n.setup({stream:e.stream,width:e.width,height:e.height,pose:t})}window.onload=async()=>{const e=await r.MediaPipePose.create({cameraConstraints:a.cameraConstraints,mediaPipeOptions:a.mediaPipeOptions,smoothen:a.smoothenDetection}),t=e.getVideoPlayer();e.startDetection();(new i).onFrameLoad=o=>c({player:t,iframe:o.target,pose:e});const o=document.querySelector("#overlay");o.onload=o=>c({player:t,iframe:o.target,pose:e}),o.src="/pages/ExpoOverlay"};
//# sourceMappingURL=index.f09c3f7a.js.map
