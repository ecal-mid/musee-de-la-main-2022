function e(e){return e&&e.__esModule?e.default:e}var t,n,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={};n=function(){var e,t="object"==typeof self&&self.self===self&&self||"object"==typeof i&&i.global===i&&i||this,n=t.document;function o(e,i){var o,s,r={},a={},u=(i=i||{}).auto||0,c=!1,l=function(){},d=function(e){return!!e&&("boolean"!=typeof e.cancelable||e.cancelable)};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1});var h=!!t.addEventListener,v=function(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){e=!0}});t.addEventListener("testEvent",null,n),t.removeEventListener("testEvent",null,n)}catch(t){e=!1}return e}(),f="ontouchstart"in t||t.DocumentTouch&&n instanceof DocumentTouch,m=function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in t)if(void 0!==e.style[t[n]])return!0;return!1}(n.createElement("swipe"));if(e){var p,g,b,y,E=e.children[0],w=parseInt(i.startSlide,10)||0,T=i.speed||300;i.continuous=void 0===i.continuous||i.continuous;var L,x,S,k=(x="direction",(L=e).currentStyle?S=L.currentStyle[x]:t.getComputedStyle&&(S=t.getComputedStyle(L,null).getPropertyValue(x)),"rtl"===S?"right":"left");i.autoRestart=void 0!==i.autoRestart&&i.autoRestart;var M=function(e,t){t=t||100;var n=null;function i(){n&&clearTimeout(n)}function o(){var o=this,s=arguments;i(),n=setTimeout((function(){n=null,e.apply(o,s)}),t)}return o.cancel=i,o}(O),D={handleEvent:function(e){if(!c||"resize"===e.type){switch(e.type){case"mousedown":case"touchstart":this.start(e);break;case"mousemove":case"touchmove":this.move(e);break;case"mouseup":case"mouseleave":case"touchend":this.end(e);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":this.transitionEnd(e);break;case"resize":M()}i.stopPropagation&&e.stopPropagation()}},start:function(e){var t,n,s;t=X(e)?e:e.touches[0],i.ignore&&t.target.matches(i.ignore)||(X(e)&&e.preventDefault(),r={x:t.pageX,y:t.pageY,time:+new Date},o=void 0,a={},X(e)?(E.addEventListener("mousemove",this,!1),E.addEventListener("mouseup",this,!1),E.addEventListener("mouseleave",this,!1)):(E.addEventListener("touchmove",this,!!v&&{passive:!1}),E.addEventListener("touchend",this,!1)),n=j(),s=p[w],i.dragStart&&i.dragStart(n,s))},move:function(e){var t;if(X(e))t=e;else{if(e.touches.length>1||e.scale&&1!==e.scale)return;i.disableScroll&&d(e)&&e.preventDefault(),t=e.touches[0]}a={x:t.pageX-r.x,y:t.pageY-r.y},void 0===o&&(o=!!(o||Math.abs(a.x)<Math.abs(a.y))),o||(d(e)&&e.preventDefault(),B(),i.continuous?($(_(w-1),a.x+g[_(w-1)],0),$(w,a.x+g[w],0),$(_(w+1),a.x+g[_(w+1)],0)):(a.x=a.x/(!w&&a.x>0||w===p.length-1&&a.x<0?Math.abs(a.x)/b+1:1),$(w-1,a.x+g[w-1],0),$(w,a.x+g[w],0),$(w+1,a.x+g[w+1],0)))},end:function(e){var t=+new Date-r.time,n=Number(t)<250&&Math.abs(a.x)>20||Math.abs(a.x)>b/2,s=!w&&a.x>0||w===p.length-1&&a.x<0;i.continuous&&(s=!1);var u,c,l=Math.abs(a.x)/a.x;o||(n&&!s?(l<0?(i.continuous?(R(_(w-1),-b,0),R(_(w+2),b,0)):R(w-1,-b,0),R(w,g[w]-b,T),R(_(w+1),g[_(w+1)]-b,T),w=_(w+1)):(i.continuous?(R(_(w+1),b,0),R(_(w-2),-b,0)):R(w+1,b,0),R(w,g[w]+b,T),R(_(w-1),g[_(w-1)]+b,T),w=_(w-1)),C(j(),p[w],l)):i.continuous?(R(_(w-1),-b,T),R(w,0,T),R(_(w+1),b,T)):(R(w-1,-b,T),R(w,0,T),R(w+1,b,T))),X(e)?(E.removeEventListener("mousemove",D,!1),E.removeEventListener("mouseup",D,!1),E.removeEventListener("mouseleave",D,!1)):(E.removeEventListener("touchmove",D,!!v&&{passive:!1}),E.removeEventListener("touchend",D,!1)),u=j(),c=p[w],i.dragEnd&&i.dragEnd(u,c)},transitionEnd:function(e){parseInt(e.target.getAttribute("data-index"),10)===w&&((u||i.autoRestart)&&H(),I(j(),p[w]))}};return O(),N(),{setup:O,slide:function(e,t){B(),P(e,t)},prev:function(){B(),c||(i.continuous||w)&&P(w-1)},next:function(){B(),A()},restart:H,stop:B,getPos:j,disable:function(){B(),c=!0},enable:function(){c=!1,H()},getNumSlides:function(){return y},kill:function(){B(),e.style.visibility="",E.style.width="",E.style[k]="";for(var t=p.length;t--;){m&&$(t,0,0);var n=p[t];n.getAttribute("data-cloned")&&n.parentElement.removeChild(n),n.style.width="",n.style[k]="",n.style.webkitTransitionDuration=n.style.MozTransitionDuration=n.style.msTransitionDuration=n.style.OTransitionDuration=n.style.transitionDuration="",n.style.webkitTransform=n.style.msTransform=n.style.MozTransform=n.style.OTransform=""}W(),M.cancel()}}}function W(){h?(E.removeEventListener("touchstart",D,!!v&&{passive:!0}),E.removeEventListener("mousedown",D,!1),E.removeEventListener("webkitTransitionEnd",D,!1),E.removeEventListener("msTransitionEnd",D,!1),E.removeEventListener("oTransitionEnd",D,!1),E.removeEventListener("otransitionend",D,!1),E.removeEventListener("transitionend",D,!1),t.removeEventListener("resize",D,!1)):t.onresize=null}function z(e){var t=e.cloneNode(!0);E.appendChild(t),t.setAttribute("data-cloned",!0),t.removeAttribute("id")}function O(n){if(null!=n)for(var o in n)i[o]=n[o];p=E.children,y=p.length;for(var s=0;s<p.length;s++)p[s].getAttribute("data-cloned")&&y--;if(p.length<2&&(i.continuous=!1),m&&i.continuous&&p.length<3&&(z(p[0]),z(p[1]),p=E.children),"right"===k)for(var r=0;r<p.length;r++)p[r].style.float="right";g=new Array(p.length),b=e.getBoundingClientRect().width||e.offsetWidth,E.style.width=p.length*b*2+"px";for(var a=p.length;a--;){var u=p[a];u.style.width=b+"px",u.setAttribute("data-index",a),m&&(u.style[k]=a*-b+"px",R(a,w>a?-b:w<a?b:0,0))}i.continuous&&m&&(R(_(w-1),-b,0),R(_(w+1),b,0)),m||(E.style[k]=w*-b+"px"),e.style.visibility="visible",W(),h?(f&&E.addEventListener("touchstart",D,!!v&&{passive:!0}),i.draggable&&E.addEventListener("mousedown",D,!1),m&&(E.addEventListener("webkitTransitionEnd",D,!1),E.addEventListener("msTransitionEnd",D,!1),E.addEventListener("oTransitionEnd",D,!1),E.addEventListener("otransitionend",D,!1),E.addEventListener("transitionend",D,!1)),t.addEventListener("resize",D,!1)):t.onresize=M}function A(){c||(i.continuous||w<p.length-1)&&P(w+1)}function C(e,t,n){i.callback&&i.callback(e,t,n)}function I(e,t){i.transitionEnd&&i.transitionEnd(e,t)}function _(e){return(p.length+e%p.length)%p.length}function j(){var e=w;return e>=y&&(e-=y),e}function P(e,t){if(e="number"!=typeof e?parseInt(e,10):e,w!==e){if(m){var n=Math.abs(w-e)/(w-e);if(i.continuous){var o=n;(n=-g[_(e)]/b)!==o&&(e=-n*p.length+e)}for(var s=Math.abs(w-e)-1;s--;)R(_((e>w?e:w)-s-1),b*n,0);e=_(e),R(w,b*n,t||T),R(e,0,t||T),i.continuous&&R(_(e-n),-b*n,0)}else e=_(e),function(e,t,n){if(n)var o=+new Date,s=setInterval((function(){var r=+new Date-o;if(r>n)return E.style[k]=t+"px",(u||i.autoRestart)&&H(),I(j(),p[w]),void clearInterval(s);E.style[k]=(t-e)*(Math.floor(r/n*100)/100)+e+"px"}),4);else E.style[k]=t+"px"}(w*-b,e*-b,t||T);w=e,setTimeout(function(){C(j(),p[w],n)}||l,0)}}function R(e,t,n){$(e,t,n),g[e]=t}function $(e,t,n){var i=p[e],o=i&&i.style;o&&(o.webkitTransitionDuration=o.MozTransitionDuration=o.msTransitionDuration=o.OTransitionDuration=o.transitionDuration=n+"ms",o.webkitTransform=o.msTransform=o.MozTransform=o.OTransform=o.transform="translateX("+t+"px)")}function N(){(u=i.auto||0)&&(s=setTimeout(A,u))}function B(){u=0,clearTimeout(s)}function H(){B(),N()}function X(e){return/^mouse/.test(e.type)}}return(t.jQuery||t.Zepto)&&((e=t.jQuery||t.Zepto).fn.Swipe=function(t){return this.each((function(){e(this).data("Swipe",new o(e(this)[0],t))}))}),o},t=(t=o)||{},"function"==typeof define&&define.amd?define([],(function(){return t.Swipe=n(),t.Swipe})):o?o=n():t.Swipe=n();class s extends class{constructor(){this._events={}}addEventListener(e,t){const n=this._events;(n[e]=n[e]||[]).push(t)}emit(e,t){const n=this._events[e];n&&n.forEach(((e,n)=>{e.apply(null,t)}))}removeEventListener(e){delete this._events[e]}}{constructor(){super(),this.handlers={open:this.onOpenWSConnection.bind(this),error:this.onWSError.bind(this),message:this.onWSMessage.bind(this)},this.checkWebsocketAvailibility()}checkWebsocketAvailibility(){window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket?this.initConnection():alert("Il faut utiliser un autre navigateur. Chrome par exemple.")}initConnection(){this.connection=new WebSocket(`ws://${window.location.host}`),this.connection.onopen=this.handlers.open,this.connection.onerror=this.handlers.error,this.connection.onmessage=this.handlers.message}onOpenWSConnection(e){console.log("::open connection::",e)}onWSError(e){console.log("::error::",e)}onWSMessage(e){console.log("::message::",e),this.emit("message",[JSON.parse(e.data)])}}class r{constructor(){this.isFullscreen=!1,this.debug=document.getElementById("debug"),this.handlers={callback:this.onTransitionEnd.bind(this),message:this.onMessage.bind(this)},window.mySwipe=new(e(o))(document.getElementById("slider"),{stopPropagation:!0,transitionEnd:this.handlers.callback}),this.socket=new s,this.socket.addEventListener("message",this.handlers.message),this.initListeners()}onTransitionEnd(e,t,n){this.debug.innerHTML=`${e},${t},${n}`,this.socket.connection.send(JSON.stringify({project_id:e,sender:this.ID}))}onMessage(e){"client_id"in e&&(this.ID=e.client_id),this.debug.innerHTML="";Object.keys(e).forEach((t=>{this.debug.innerHTML+=`${t}: ${e[t]}<br/>`}))}initListeners(){}}window.onload=()=>{new r};
//# sourceMappingURL=index.880b2b0c.js.map
