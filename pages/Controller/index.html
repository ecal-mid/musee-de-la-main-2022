<!DOCTYPE html>
<html>
  <head>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black"
    />
    <meta name="apple-mobile-web-app-title" content="Notentool" />
    <meta name="mobile-web-app-capable" content="yes" />
    <link rel="apple-touch-icon" href="~/assets/logo167.png" />
    <link rel="manifest" href="~/assets/manifest.json" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>ECAL Controller</title>
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        overflow: hidden;
        margin: 0;
        background: black;
      }

      iframe {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: black;
      }
    </style>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
  </head>
  <body>
    <iframe frameborder="0"></iframe>
    <script>
      window.addEventListener('load', () => loadFrame())

      document.addEventListener('visibilitychange', (event) => {
        const entered = document.visibilityState === 'visible'

        if (entered) loadFrame()
      })

      function loadFrame() {
        const iframe = document.querySelector('iframe')
        if (window.navigator.onLine)
          iframe.src = `./iframe.html?version${Date.now()}`
        else {
          //! not working but aint breaking
          iframe.srcdoc =
            '<p style="color: white">Offline!<br>Make sure to be connected to the wifi<br>Then restart the ipad</p>'
          iframe.removeAttribute('src')
        }
      }
    </script>
  </body>
</html>
